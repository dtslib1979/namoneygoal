<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI ì›Œí‚¤í† í‚¤ | ë‚¨ì›ê³¨</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --primary: #A855F7;
      --accent: #F59E0B;
      --bg: #0a0a14;
      --card-bg: #1a1a2e;
      --text: #f5f5f5;
      --text-dim: #a0a0a0;
      --success: #22c55e;
      --danger: #ef4444;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .header {
      background: var(--card-bg);
      padding: 20px;
      text-align: center;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .header h1 {
      font-size: 20px;
      margin-bottom: 4px;
    }

    .header p {
      font-size: 13px;
      color: var(--accent);
    }

    .container {
      flex: 1;
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      width: 100%;
    }

    /* Mode Selector */
    .mode-tabs {
      display: flex;
      background: var(--card-bg);
      border-radius: 12px;
      padding: 4px;
      margin-bottom: 20px;
    }

    .mode-tab {
      flex: 1;
      padding: 12px;
      text-align: center;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      color: var(--text-dim);
    }

    .mode-tab.active {
      background: var(--primary);
      color: white;
    }

    /* Voice Input */
    .voice-section {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 30px;
      text-align: center;
      margin-bottom: 20px;
    }

    .voice-btn {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      border: none;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: white;
      font-size: 40px;
      cursor: pointer;
      margin: 20px auto;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 40px rgba(168, 85, 247, 0.4);
      transition: all 0.3s;
      position: relative;
    }

    .voice-btn.recording {
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 10px 40px rgba(168, 85, 247, 0.4); }
      50% { transform: scale(1.05); box-shadow: 0 15px 50px rgba(168, 85, 247, 0.6); }
    }

    .voice-status {
      font-size: 14px;
      color: var(--text-dim);
      margin-top: 15px;
    }

    .voice-status.recording {
      color: var(--danger);
    }

    /* Transcript Area */
    .transcript-section {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .transcript-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .transcript-header h3 {
      font-size: 14px;
      color: var(--text-dim);
    }

    .transcript-actions {
      display: flex;
      gap: 10px;
    }

    .action-btn {
      background: rgba(168, 85, 247, 0.2);
      border: none;
      color: var(--primary);
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .action-btn:hover {
      background: rgba(168, 85, 247, 0.4);
    }

    .transcript-content {
      background: var(--bg);
      border-radius: 12px;
      padding: 20px;
      min-height: 150px;
      max-height: 300px;
      overflow-y: auto;
      font-size: 15px;
      line-height: 1.8;
      white-space: pre-wrap;
    }

    .transcript-content.empty {
      color: var(--text-dim);
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Output Templates */
    .output-section {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .output-section h3 {
      font-size: 14px;
      color: var(--text-dim);
      margin-bottom: 15px;
    }

    .template-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }

    .template-btn {
      background: var(--bg);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 15px;
      text-align: left;
      cursor: pointer;
      transition: all 0.3s;
    }

    .template-btn:hover {
      border-color: var(--primary);
      background: rgba(168, 85, 247, 0.1);
    }

    .template-btn h4 {
      font-size: 14px;
      margin-bottom: 4px;
    }

    .template-btn p {
      font-size: 12px;
      color: var(--text-dim);
    }

    /* Generated Output */
    .generated-section {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
      display: none;
    }

    .generated-section.active {
      display: block;
    }

    .generated-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .generated-header h3 {
      font-size: 16px;
    }

    .generated-content {
      background: var(--bg);
      border-radius: 12px;
      padding: 20px;
      font-size: 14px;
      line-height: 1.8;
      white-space: pre-wrap;
    }

    .copy-btn {
      background: linear-gradient(135deg, var(--primary), var(--accent));
      border: none;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      margin-top: 15px;
      width: 100%;
    }

    /* History */
    .history-section {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 20px;
    }

    .history-section h3 {
      font-size: 14px;
      color: var(--text-dim);
      margin-bottom: 15px;
    }

    .history-item {
      background: var(--bg);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 10px;
    }

    .history-item:last-child {
      margin-bottom: 0;
    }

    .history-meta {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 12px;
      color: var(--text-dim);
    }

    .history-preview {
      font-size: 14px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .powered-by {
      text-align: center;
      padding: 20px;
      font-size: 12px;
      color: var(--text-dim);
    }

    .powered-by a {
      color: var(--primary);
      text-decoration: none;
    }

    /* Instruction modal */
    .instruction-box {
      background: rgba(245, 158, 11, 0.1);
      border: 1px solid var(--accent);
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 20px;
    }

    .instruction-box h4 {
      color: var(--accent);
      font-size: 14px;
      margin-bottom: 8px;
    }

    .instruction-box ol {
      margin-left: 20px;
      font-size: 13px;
      color: var(--text-dim);
    }

    .instruction-box li {
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
  <header class="header">
    <h1>AI ì›Œí‚¤í† í‚¤</h1>
    <p>ë§í•˜ë©´ ê¸€ì´ ëœë‹¤</p>
  </header>

  <main class="container">
    <div class="instruction-box">
      <h4>ì‚¬ìš©ë²•</h4>
      <ol>
        <li>ë§ˆì´í¬ ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ë§í•˜ì„¸ìš”</li>
        <li>ìŒì„±ì´ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜ë©ë‹ˆë‹¤</li>
        <li>ChatGPTì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”</li>
        <li>ìƒì„±ëœ ê¸€ì„ ë¸”ë¡œê·¸ì— ì˜¬ë¦¬ì„¸ìš”</li>
      </ol>
    </div>

    <div class="mode-tabs">
      <div class="mode-tab active" data-mode="voice">ìŒì„± ì…ë ¥</div>
      <div class="mode-tab" data-mode="text">í…ìŠ¤íŠ¸ ì…ë ¥</div>
    </div>

    <div class="voice-section" id="voiceSection">
      <p style="font-size: 14px; color: var(--text-dim); margin-bottom: 10px;">ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ë§í•˜ì„¸ìš”</p>
      <button class="voice-btn" id="voiceBtn">ğŸ¤</button>
      <p class="voice-status" id="voiceStatus">ëŒ€ê¸° ì¤‘</p>
    </div>

    <div class="transcript-section">
      <div class="transcript-header">
        <h3>ìŒì„± â†’ í…ìŠ¤íŠ¸</h3>
        <div class="transcript-actions">
          <button class="action-btn" id="clearBtn">ì§€ìš°ê¸°</button>
          <button class="action-btn" id="copyRawBtn">ë³µì‚¬</button>
        </div>
      </div>
      <div class="transcript-content empty" id="transcript">
        ìŒì„± ì¸ì‹ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤
      </div>
    </div>

    <div class="output-section">
      <h3>ChatGPT í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿</h3>
      <div class="template-grid">
        <button class="template-btn" data-template="blog">
          <h4>ë¸”ë¡œê·¸ ê¸€</h4>
          <p>ë§¤ë¬¼ ì†Œê°œ ê¸€ë¡œ ë³€í™˜</p>
        </button>
        <button class="template-btn" data-template="sns">
          <h4>SNS í¬ìŠ¤íŠ¸</h4>
          <p>ì§§ì€ í™ë³´ ë¬¸êµ¬ë¡œ ë³€í™˜</p>
        </button>
        <button class="template-btn" data-template="script">
          <h4>ì˜ìƒ ëŒ€ë³¸</h4>
          <p>ìœ íŠœë¸Œ ëŒ€ë³¸ìœ¼ë¡œ ë³€í™˜</p>
        </button>
        <button class="template-btn" data-template="analysis">
          <h4>ì‹œì„¸ ë¶„ì„</h4>
          <p>ì „ë¬¸ ë¶„ì„ ê¸€ë¡œ ë³€í™˜</p>
        </button>
      </div>
    </div>

    <div class="generated-section" id="generatedSection">
      <div class="generated-header">
        <h3>ìƒì„±ëœ í”„ë¡¬í”„íŠ¸</h3>
        <button class="action-btn" id="regenerateBtn">ë‹¤ì‹œ ìƒì„±</button>
      </div>
      <div class="generated-content" id="generatedContent"></div>
      <button class="copy-btn" id="copyPromptBtn">ChatGPTì— ë¶™ì—¬ë„£ê¸°ìš© ë³µì‚¬</button>
    </div>

    <div class="history-section">
      <h3>ìµœê·¼ ê¸°ë¡</h3>
      <div id="historyList">
        <p style="color: var(--text-dim); font-size: 14px; text-align: center;">ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</p>
      </div>
    </div>
  </main>

  <footer class="powered-by">
    Powered by <a href="https://namoneygoal.kr">ë‚¨ì›ê³¨</a> | AI ì“°ëŠ” ì¤‘ê°œì¸
  </footer>

  <script>
    // AI Walkie-Talkie System
    class AIWalkie {
      constructor() {
        this.recognition = null;
        this.isRecording = false;
        this.transcript = '';
        this.history = [];
        this.storageKey = 'nmg_walkie_history';
        this.templates = {
          blog: `ì•„ë˜ ë‚´ìš©ì„ ë¶€ë™ì‚° ë¸”ë¡œê·¸ ê¸€ë¡œ ë‹¤ë“¬ì–´ì¤˜. ì „ë¬¸ì ì´ë©´ì„œë„ ì¹œê·¼í•œ í†¤ìœ¼ë¡œ, í•µì‹¬ ì •ë³´ë¥¼ ê°•ì¡°í•´ì„œ ì‘ì„±í•´ì¤˜.

---
{content}
---

í˜•ì‹:
- ì œëª© (í´ë¦­í•˜ê³  ì‹¶ì€ ì œëª©)
- ë³¸ë¬¸ (3-4 ë¬¸ë‹¨)
- í•µì‹¬ í¬ì¸íŠ¸ 3ê°€ì§€
- ë¬¸ì˜ ì•ˆë‚´`,

          sns: `ì•„ë˜ ë‚´ìš©ì„ SNS í™ë³´ ë¬¸êµ¬ë¡œ ë³€í™˜í•´ì¤˜. ì§§ê³  ì„íŒ©íŠ¸ ìˆê²Œ, ì´ëª¨ì§€ ì ì ˆíˆ ì‚¬ìš©í•´ì„œ ì‘ì„±í•´ì¤˜.

---
{content}
---

í˜•ì‹:
- ë©”ì¸ ì¹´í”¼ (1ì¤„)
- ë³¸ë¬¸ (3ì¤„ ì´ë‚´)
- í•´ì‹œíƒœê·¸ 5ê°œ`,

          script: `ì•„ë˜ ë‚´ìš©ì„ ìœ íŠœë¸Œ ì˜ìƒ ëŒ€ë³¸ìœ¼ë¡œ ë³€í™˜í•´ì¤˜. ë§í•˜ëŠ” ìŠ¤íƒ€ì¼ë¡œ, ìì—°ìŠ¤ëŸ½ê²Œ ì‘ì„±í•´ì¤˜.

---
{content}
---

í˜•ì‹:
- ì˜¤í”„ë‹ ë©˜íŠ¸ (ê´€ì‹¬ ëŒê¸°)
- ë³¸ë¡  (í•µì‹¬ ë‚´ìš© ì„¤ëª…)
- ë§ˆë¬´ë¦¬ (êµ¬ë…/ì¢‹ì•„ìš” ìœ ë„)

â€» ì´ 2-3ë¶„ ë¶„ëŸ‰ìœ¼ë¡œ`,

          analysis: `ì•„ë˜ ë‚´ìš©ì„ ì „ë¬¸ì ì¸ ë¶€ë™ì‚° ì‹œì„¸ ë¶„ì„ ê¸€ë¡œ ë³€í™˜í•´ì¤˜. ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ ì‹ ë¢°ê° ìˆê²Œ ì‘ì„±í•´ì¤˜.

---
{content}
---

í˜•ì‹:
- í˜„í™© ìš”ì•½
- í•µì‹¬ ë¶„ì„ í¬ì¸íŠ¸
- ì „ë§
- íˆ¬ì ì‹œ ê³ ë ¤ì‚¬í•­`
        };

        this.init();
      }

      init() {
        this.setupSpeechRecognition();
        this.loadHistory();
        this.bindEvents();
        this.renderHistory();
      }

      setupSpeechRecognition() {
        if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
          document.getElementById('voiceStatus').textContent = 'ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„± ì¸ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤';
          document.getElementById('voiceBtn').disabled = true;
          return;
        }

        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        this.recognition = new SpeechRecognition();
        this.recognition.continuous = true;
        this.recognition.interimResults = true;
        this.recognition.lang = 'ko-KR';

        this.recognition.onstart = () => {
          this.isRecording = true;
          document.getElementById('voiceBtn').classList.add('recording');
          document.getElementById('voiceStatus').textContent = 'ë“£ëŠ” ì¤‘...';
          document.getElementById('voiceStatus').classList.add('recording');
        };

        this.recognition.onend = () => {
          this.isRecording = false;
          document.getElementById('voiceBtn').classList.remove('recording');
          document.getElementById('voiceStatus').textContent = 'ëŒ€ê¸° ì¤‘';
          document.getElementById('voiceStatus').classList.remove('recording');
        };

        this.recognition.onresult = (event) => {
          let finalTranscript = '';
          let interimTranscript = '';

          for (let i = event.resultIndex; i < event.results.length; i++) {
            const transcript = event.results[i][0].transcript;
            if (event.results[i].isFinal) {
              finalTranscript += transcript;
            } else {
              interimTranscript += transcript;
            }
          }

          if (finalTranscript) {
            this.transcript += finalTranscript + ' ';
          }

          this.updateTranscript(this.transcript + interimTranscript);
        };

        this.recognition.onerror = (event) => {
          console.error('Speech recognition error:', event.error);
          document.getElementById('voiceStatus').textContent = `ì˜¤ë¥˜: ${event.error}`;
        };
      }

      updateTranscript(text) {
        const el = document.getElementById('transcript');
        if (text.trim()) {
          el.textContent = text;
          el.classList.remove('empty');
        } else {
          el.textContent = 'ìŒì„± ì¸ì‹ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤';
          el.classList.add('empty');
        }
      }

      toggleRecording() {
        if (!this.recognition) return;

        if (this.isRecording) {
          this.recognition.stop();
        } else {
          this.transcript = '';
          this.recognition.start();
        }
      }

      generatePrompt(template) {
        const content = this.transcript.trim();
        if (!content) {
          alert('ë¨¼ì € ìŒì„±ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
          return;
        }

        const prompt = this.templates[template].replace('{content}', content);

        document.getElementById('generatedContent').textContent = prompt;
        document.getElementById('generatedSection').classList.add('active');
        document.getElementById('generatedSection').scrollIntoView({ behavior: 'smooth' });

        // Save to history
        this.addToHistory({
          type: template,
          original: content,
          prompt: prompt,
          date: new Date().toISOString()
        });
      }

      copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
          // Visual feedback
          const btn = event.target;
          const originalText = btn.textContent;
          btn.textContent = 'ë³µì‚¬ë¨!';
          setTimeout(() => btn.textContent = originalText, 1500);
        });
      }

      loadHistory() {
        const stored = localStorage.getItem(this.storageKey);
        this.history = stored ? JSON.parse(stored) : [];
      }

      saveHistory() {
        localStorage.setItem(this.storageKey, JSON.stringify(this.history.slice(0, 20)));
      }

      addToHistory(item) {
        this.history.unshift(item);
        this.saveHistory();
        this.renderHistory();
      }

      renderHistory() {
        const list = document.getElementById('historyList');

        if (this.history.length === 0) {
          list.innerHTML = '<p style="color: var(--text-dim); font-size: 14px; text-align: center;">ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</p>';
          return;
        }

        const typeNames = {
          blog: 'ë¸”ë¡œê·¸',
          sns: 'SNS',
          script: 'ì˜ìƒ ëŒ€ë³¸',
          analysis: 'ì‹œì„¸ ë¶„ì„'
        };

        list.innerHTML = this.history.slice(0, 5).map((item, i) => {
          const date = new Date(item.date);
          const dateStr = `${date.getMonth() + 1}/${date.getDate()} ${date.getHours()}:${String(date.getMinutes()).padStart(2, '0')}`;

          return `
            <div class="history-item" data-index="${i}">
              <div class="history-meta">
                <span>${typeNames[item.type] || item.type}</span>
                <span>${dateStr}</span>
              </div>
              <div class="history-preview">${item.original}</div>
            </div>
          `;
        }).join('');
      }

      bindEvents() {
        // Voice button
        document.getElementById('voiceBtn').addEventListener('click', () => {
          this.toggleRecording();
        });

        // Clear button
        document.getElementById('clearBtn').addEventListener('click', () => {
          this.transcript = '';
          this.updateTranscript('');
          document.getElementById('generatedSection').classList.remove('active');
        });

        // Copy raw transcript
        document.getElementById('copyRawBtn').addEventListener('click', (e) => {
          this.copyToClipboard(this.transcript);
        });

        // Template buttons
        document.querySelectorAll('.template-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            this.generatePrompt(btn.dataset.template);
          });
        });

        // Copy prompt button
        document.getElementById('copyPromptBtn').addEventListener('click', (e) => {
          const content = document.getElementById('generatedContent').textContent;
          this.copyToClipboard(content);
        });

        // Mode tabs
        document.querySelectorAll('.mode-tab').forEach(tab => {
          tab.addEventListener('click', () => {
            document.querySelectorAll('.mode-tab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');

            const voiceSection = document.getElementById('voiceSection');
            if (tab.dataset.mode === 'text') {
              voiceSection.innerHTML = `
                <textarea id="textInput" placeholder="ì—¬ê¸°ì— ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”..." style="
                  width: 100%;
                  min-height: 150px;
                  background: var(--bg);
                  border: 1px solid rgba(255,255,255,0.1);
                  border-radius: 12px;
                  padding: 15px;
                  color: var(--text);
                  font-size: 15px;
                  resize: vertical;
                "></textarea>
              `;

              document.getElementById('textInput').addEventListener('input', (e) => {
                this.transcript = e.target.value;
                this.updateTranscript(this.transcript);
              });
            } else {
              voiceSection.innerHTML = `
                <p style="font-size: 14px; color: var(--text-dim); margin-bottom: 10px;">ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ë§í•˜ì„¸ìš”</p>
                <button class="voice-btn" id="voiceBtn">ğŸ¤</button>
                <p class="voice-status" id="voiceStatus">ëŒ€ê¸° ì¤‘</p>
              `;

              document.getElementById('voiceBtn').addEventListener('click', () => {
                this.toggleRecording();
              });
            }
          });
        });

        // History item click
        document.getElementById('historyList').addEventListener('click', (e) => {
          const item = e.target.closest('.history-item');
          if (item) {
            const index = parseInt(item.dataset.index);
            const historyItem = this.history[index];
            if (historyItem) {
              this.transcript = historyItem.original;
              this.updateTranscript(historyItem.original);
              document.getElementById('generatedContent').textContent = historyItem.prompt;
              document.getElementById('generatedSection').classList.add('active');
            }
          }
        });
      }
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      new AIWalkie();
    });
  </script>
</body>
</html>
